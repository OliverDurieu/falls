$(document).ready(function(){
  $('#loginButton').click(function(){
    alert("yolo");
  });
});

var authUser, checkLoginStatus, listen, sendCode;

authUser = function() {
  FB.login(checkLoginStatus, {
    scope: 'email'
  });
};

checkLoginStatus = function(response) {
  var accessToken, uid;
  if (response && response.status === 'connected') {
    uid = response.authResponse.userID;
    accessToken = response.authResponse.accessToken;
    $.ajax({
      type: 'POST',
      data: {
        fb_id: uid
      },
      url: '/users/verify_uid',
      success: function(data) {
        // console.log(data.success);
        FB.api('/me', function(response) {
          var elem;
          // console.log(response);
          if (data.success === true) {
            elem = document.getElementById('exampleInputEmail1');
            elem.value = response.first_name;
            elem = document.getElementById('exampleInputEmail2');
            elem.value = response.last_name;
            elem = document.getElementById('verified_email');
            elem.value = response.email;
          }
          if (data.success === false) {
            alert('face book user is already linked');
          }
        });
      },
      error: function() {
        // console.log('error!');
      }
    });
  } else if (response.status === 'not_authorized') {
    alert('User logged into Facebook, but not your app');
  } else {
    alert('User not logged into Facebook, no on app');
  }
};

sendCode = function() {
  alert('in send conde func');
  $.ajax({
    type: 'GET',
    url: '/driver_verifications/email_token_generator',
    success: function(data) {
      // console.log('success!');
      // console.log(data.success);
    },
    error: function() {
      // console.log('error!');
    }
  });
};


/*
 * Welcome to the new js2coffee 2.0, now
 * rewritten to use the esprima parser.
 * try it out!
 */

listen = function(el, event, handler) {
  if (el.addEventListener) {
    return el.addEventListener(event, handler);
  } else {
    return el.attachEvent('on' + event, function() {
      return handler.call(el);
    });
  }
};

FB.init({
  appId: '562756200542819',
  xfbml: true,
  status: true,
  cookie: true
});

// ---
// generated by coffee-script 1.9.2